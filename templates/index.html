<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Cheap_Snake Game Deals</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}"><!--loads css file for styling-->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script><!--loads jquery for autocomplete-->
    <script src="{{ url_for('static', filename='script.js') }}"></script><!--loads js file-->
</head>

<body>
    <h1>Cheap_Snake Game Deals</h1>
    <!--search box, pulls suggestions from script.js for autocomplete-->
    <form method="POST">
        <input type="text" name="title" id="search-input" autocomplete="off" placeholder="Enter Game Name" required>
        <button type="submit">Ssssearch...</button>
        <ul id="suggestions" class="suggestions"></ul>
    </form>

    <!--data from flask is looped through, finds thumbnail, price, store name using store map, and link to game-->
    {% if deals %}
        <h2>Results:</h2>
        <ul>
        {% for deal in deals %}
            <li>
                <img src="https://cdn.cloudflare.steamstatic.com/steam/apps/{{ deal.steamAppID }}/capsule_sm_120.jpg"
                     onerror="this.style.display='none'" alt="Thumbnail"><br>
                <strong>{{ deal.title }}</strong><br>
                Sale Price: ${{ deal.salePrice }}<br>
                Normal Price: ${{ deal.normalPrice }}<br>
                Store: {{ store_map.get(deal.storeID, 'Unknown') }}<br>
                <a href="https://www.cheapshark.com/redirect?dealID={{ deal.dealID }}" target="_blank">Buy Now</a>
            </li><br>
        {% endfor %}
        </ul>
    {% endif %}
</body>

</html>
